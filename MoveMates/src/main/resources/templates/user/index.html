<!DOCTYPE html>
<html xmlns:th="https://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
	<head>
		<div th:replace="~{fragment :: meta}"></div>
		
		<div th:replace="~{fragment :: styles}"></div>
		
		<title>マイページ</title>
		
	</head>
	<body>
		<div class="wrapper">
			<div th:replace="~{fragment :: sidebar-pc}"></div>
			<div th:replace="~{fragment :: header-sp}"></div>
			<main>
				<div class="container">
					<div class="row justify-content-center">
						<div class="col-lg-11">
							<!-- カレンダーここから -->
							<div class="d-flex justify-content-between align-items-end my-2 w-100">
								<div class="calendar-arrow">
									<img th:src="@{/images/calendar-left.svg}" onclick="moveToPreviousMonth()">
								</div>
								<h5 id="currentMonthYear" class="mt-2 mb-0"></h5>
								<div class="calendar-arrow">
									<img th:src="@{/images/calendar-right.svg}" onclick="moveToNextMonth()">
								</div>
							</div>
							<div id="my-calendar"></div>
							<!-- カレンダーここまで -->
							<!-- 継続週数 -->
							<div class="consecutive-weeks-container">
								<div class="consecutive-weeks-box-left">
									<div>
										<span>継続週数</span>
										<h3 th:text="${encouragingMessage.getConsecutiveWeeks()}"></h3>
									</div>
								</div>
								<div class="consecutive-weeks-box-right">
									<p th:text="${encouragingMessage.getMessage()}"></p>
								</div>
							</div>
						</div>
					</div>
				</div>
			</main>
			<div th:replace="~{fragment :: navbar-bottom-sp}"></div>
		</div>
		<div th:replace="~{fragment :: scripts}"></div>
		<script th:src="@{/js/calendar.js}"></script>
		<!-- カレンダーに運動の記録を渡す -->
		<script th:inline="javascript">
			// 現在の年と月を取得
    		const today = new Date();
    		let currentYear = today.getFullYear();
    		let currentMonth = today.getMonth();
    		
    		const exerciseDays = /*[[${exerciseDays}]]*/[];
			console.log(exerciseDays);
			
			// javascriptの関数呼び出し
			generateCalendar(currentYear, currentMonth, exerciseDays);
		</script>
	</body>
</html>